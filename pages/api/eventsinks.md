---
title: Event Sinks
keywords: evemts
sidebar: api_sidebar
permalink: eventsinks.html
folder: api
toc: true
---



There are two main types of event sinks, the **File Event Sink** and the **Remote Procedure Calls Event Sink**



## File Event Sink

Event details are written to a log file located relative to the current directory. The log file is overwritten each time the EMS starts up.

```
type="file",
filename="log.txt",
format="text",
customData="my custom data"
```

File sink configuration:

The format can be one of the following types:

- “text” (plain text)
- “xml”
- “json”
- “w3c”

A typical configuration of a file sink follows:

```
eventLogger=
  {
      sinks=
      {
          {
              type="file",
              filename="../logs/events.txt",
              --format="text",
              --format="xml",
              --format="json",
              format="w3c",
              timestamp=true,
              appendTimestamp=true,
              appendInstance=true,
              fileChunkLength=43200, -- 12 hours (in seconds)
              fileChunkTime="18:00:00",
              enabledEvents=
              {
                  "inStreamCreated",
                  "outStreamCreated",
                  "streamCreated",
                  -- content removed for clarity
              },
              {
                  -- content removed for clarity
              },
          },
      },
  },
```



#### File Sink Structure Table

|       Key       |  Type   | Mandatory | Description                              |
| :-------------: | :-----: | :-------: | ---------------------------------------- |
|   customData    | object  |    no     | Custom data that will be appended to all events generated by this sink. It overrides the custom data node defined on the upper level. It can also be a complex structure, see illustration above. |
|      type       | string  |    yes    | The type of sink, “file”.                |
|    filename     | string  |    yes    | The base name of the file.               |
|     format      | string  |    yes    | Sets the file format. Allowed values are “text”, “xml”, “json” and “w3c” |
|    timestamp    | boolean |    no     |                                          |
| appendTimestamp | boolean |    no     | Sets the option to append a timestamp. If true, timestamp (YYYYMMDD_HHmmSS) is appended on every log file created. Otherwise, a 4-digit running number is appended. Default value is true. |
| appendInstance  | boolean |    no     | Appends a random 4-digit instance ID after every log file. Default is false. |
| fileChunkLength | number  |    no     | Number of seconds to create new file.    |
|  fileChunkTime  | string  |    no     | Time of the day to chunk log file, in HH:MM:SS format. *Note__: No file chunking when fileChunkLength and fileChunkTime are both present.* |
|  enabledEvents  | object  |    no     | Events that are logged. If not set, all are logged. But for W3C, non-stream-related events are ignored. |

As indicated above, the name of the file can be set using a number of options. For example,

```
filename = "/var/evostreamms/logs/streams"
appendTimestamp = true
appendInstance = true
```

The log file would be `/var/evostreamms/logs/streams_0237_20140311_183046.txt`.



## RPC (Remote Procedure Calls) Event Sink

Event details are transmitted to a remote host via HTTP POST. The EMS will ignore any response from the remote host.

RPC sink configuration:

```
type="RPC",
url="http://192.168.1.5:5555/something/service",
serializerType="JSON",
customData="my custom data"
```

The `url` field specifies the destination which will be accepting the HTTP POST event notifications..

The `serializer` type can be one of the following formats:

- **JSON**

```
{"payload":{"creationTimestamp":1349335053486.4370,"name":"","queryTimestamp":1349335053487.4370,"type":"NR","uniqueId":1,"upTime":1.0000},"type":"streamCreated"}
```

- **XML**

```
<?xml version="1.0" ?>
<MAP isArray="false" name="">
    <MAP isArray="false" name="payload">
        <DOUBLE name="creationTimestamp">1349335287346.813</DOUBLE>
        <STR name="name"></STR>
        <DOUBLE name="queryTimestamp">1349335287346.813</DOUBLE>
        <STR name="type">NR</STR>
        <UINT64 name="uniqueId">1</UINT64>
        <DOUBLE name="upTime">0.000</DOUBLE>
    </MAP>
<STR name="type">streamCreated</STR>
</MAP>
```

- **XMLRPC**

```
<?xml version="1.0"?>
<methodCall>
    <methodName>event.Log</methodName>
    <params>
        <param>
            <value>
                <struct>
                    <member>
                        <name>payload</name>
                        <value>
                            <struct>
                            <member>
                                <name>creationTimestamp</name>
                                <value><double>0.000000</double></value>
                            </member>
                            <!-- contents removed for clarity -->
                            </struct>
                        </value>
                    </member>
                    <member>
                        <name>type</name>
                        <value><string>streamCreated</string></value>
                    </member>
                </struct>
            </value>
        </param>
    </params>
</methodCall>
```

The `customData` parameter for both File and RPC Event Sinks can be *optionally* used to extra data to each event for that sink. This could be used to identify the particular EMS instance which is generating the event, return a particular ID or Key which is pertinent to your handling of the event, or anything really! A customData parameter can be a simple sting value or a complex LUA object.

If a `customData` parameter is not specified for a node, the value of the parent eventLogger customData node will be used. If that is also not specified, the value will be V_NULL.

------

## Notes

- The event sinks should be enabled to be able to use events
- Event logs will be saved in the configured `filename` 

------

## Related Links

- [Event Overview](eventoverview.html)
- [Configuring Event Notifications](eventnotification.html)
- [Application vs. Server Events](eventappvsserver.html)
- [Events List](eventlist.html)
- [Event Definition](eventdefinition.html)
- [Event Logger](userguide_configlua.html#eventLogger)
- [EvoWebservices Event](evowebservices_event.html)
- [EvoWebservices Event Configuration](evowebservices_eventconfiguration)

